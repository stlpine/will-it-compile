# Development values for will-it-compile
# Optimized for local development and testing

replicaCount: 1

image:
  repository: stlpine/will-it-compile-api
  pullPolicy: IfNotPresent
  tag: "latest"

# Compiler images matching configs/environments.yaml
# Dev environment uses latest versions only for faster setup
compilerImages:
  # C/C++ - Official GCC images (Debian-based, no alpine)
  gcc:
    repository: gcc
    tags: ["13"]  # Latest GCC version
    pullPolicy: IfNotPresent

  # Go - Official Golang images (Alpine-based)
  go:
    repository: golang
    tags: ["1.23-alpine"]  # Latest Go version
    pullPolicy: IfNotPresent

  # Rust - Official Rust images (Alpine-based)
  rust:
    repository: rust
    tags: ["1.80-alpine"]  # Latest Rust version
    pullPolicy: IfNotPresent

serviceAccount:
  create: true

podAnnotations: {}

service:
  type: NodePort
  port: 80
  targetPort: 8080

ingress:
  enabled: false

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

autoscaling:
  enabled: false

networkPolicy:
  enabled: false  # Disable for easier debugging

podDisruptionBudget:
  enabled: false  # Not needed for single replica

# Dev environment variables
env:
  - name: PORT
    value: "8080"
  - name: NAMESPACE
    valueFrom:
      fieldRef:
        fieldPath: metadata.namespace
  - name: LOG_LEVEL
    value: "debug"

# Redis Configuration (Development)
# Ephemeral in-memory cache - data lost on pod restart
redis:
  enabled: true  # Set to false to use in-memory storage for local testing
  image:
    repository: redis
    tag: "7-alpine"
    pullPolicy: IfNotPresent

  # Authentication - DISABLED for development
  auth:
    enabled: false

  # Redis Configuration
  database: 0
  poolSize: 10  # Smaller pool for dev
  jobTTL: 2  # 2 hours for dev (shorter retention)
  maxMemory: "128mb"  # Less memory for dev
  maxMemoryPolicy: "allkeys-lru"

  # Resources - Minimal for dev
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 50m
      memory: 64Mi

# Worker Pool Configuration (Development)
workerPool:
  enabled: true
  maxWorkers: 2  # Fewer workers for dev
  queueSize: 50  # Smaller queue for dev
